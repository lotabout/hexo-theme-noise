extends base
- var current_title = page.title || tag.name || category.name || site.title

block main

  article
    #index-main.container.entries
      for post in page.posts.toArray()
        .post-entry
          .post-time= post.date.format(config.date_format)
          .post-desc
            .post-title
              if post.link
                  a(href=url_for(post.link),target="_blank", itemprop="url")= post.title
              else
                  a(href=url_for(post.path))= post.title

            .post-content
              if post.description
                != post.description
              else if post.excerpt
                != post.excerpt
              else if post.content
                - var br = post.content.indexOf('</p>')
                if br < 0
                  != post.content
                else
                  != post.content.substring(0, br + 4)

            if (post.tags.length > 1)
              .post-tags
                for tag in post.tags.toArray()
                  a.post-tag(href=url_for(tag.path))= tag.name
            if (post.categories.length > 1)
              .post-categories
                for category in post.categories.toArray()
                  a.post-category(href=url_for(category.path))= category.name

        //.entry
        //  span.post-time= post.date.format(config.date_format)

        //  // support link post without title
        //  if post.link
        //      a.post-title(href=url_for(post.link),target="_blank", itemprop="url")
        //          = post.title
        //  else
        //      a.post-title(href=url_for(post.path))
        //          = post.title

        //  .post-tags
        //    for tag in post.tags.toArray()
        //      a.post-tag(href=url_for(tag.path))= tag.name

  include _partial/paginator.jade
